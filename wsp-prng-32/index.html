<!DOCTYPE html><html lang="en"><head><title>WSP-PRNG-32: A Fast, Tiny 32-Bit PRNG</title><link href="https://williamstaffordparsons.github.io/wsp-prng-32/" rel="canonical"><link href="/favicon.ico" rel="icon" type="image/x-icon"><meta content="initial-scale=1,width=device-width" name="viewport"><meta charset="utf-8"><style type="text/css">a{color:#000;font-weight:bold;letter-spacing:-0.2px;text-decoration:none;}body,html{background:#fff;color:#000;font-family:sans-serif;font-size:14px;font-weight:normal;line-height:25px;margin:0;overflow-x:hidden;width:100%;}code{background:#eee;border-radius:4px;box-sizing:border-box;color:#111;display:inline-block;font-family:monospace;font-size:11px;font-weight:normal;height:auto;letter-spacing:-0.2px;line-height:19px;margin:8px 0 17px;overflow-x:scroll;padding:28px 31px 25px;white-space:pre;width:100%}footer{display:inline-block;margin:100px 0;width:100%;}footer ul{display:inline-block;}footer ul{margin:55px 0 0;padding:0;width:100%;}footer ul li{display:inline-block;float:left;line-height:18px;margin:0 15px 5px 0;}footer ul li a{font-size:12px;float:left;}footer .social-media a{display:block;float:left;}footer .social-media a img{height:16px;}h1,h2,h3{display:inline-block;font-weight:normal;text-transform:uppercase;width:100%;}h1{font-size:23px;letter-spacing:-0.9px;line-height:32px;margin:-6px 0 34px;word-spacing:1.4px;}h2{font-size:19px;letter-spacing:-0.6px;line-height:42px;margin:0 0 24px;padding-top:18px;}h3{font-size:14px;letter-spacing:-0.3px;margin:10px 0 20px;}p{box-sizing:border-box;color:#555;display:inline-block;margin:0 0 17px;width:100%;}p .code{background:#eee;border-radius:4px;color:#111;display:inline-block;font-family:monospace;font-size:11px;font-weight:normal;letter-spacing:-0.2px;line-height:17px;margin:2px 1px;padding:4px 6px 0;}.game{background:#000;border-radius:4px;box-sizing:border-box;margin:0 0 30px;padding:21px 32px;position:relative;}.game.no-margin-top{margin-top:5px !important;}.game a{height:100%;left:0;position:absolute;text-indent:-9999px;top:0;width:100%;}.game h3{color:#fff;font-weight:bold;line-height:30px;margin:3px 0 0;}.game img{display:block;height:32px;margin-top:12px;width:32px;}.game p{color:#999;margin-bottom:5px;}.icon{float:left;line-height:32px;}.icon img{float:left;height:32px;margin-right:15px;}.no-margin-bottom{margin-bottom:0 !important;}.no-margin-left{margin-left:0 !important;}.no-margin-top{margin-top:0 !important;}.section{margin-bottom:40px;position:relative;}</style></head><body><div style="box-sizing:border-box;margin:0 auto;max-width:720px;padding:0 25px;width:100%;"><header style="display:inline-block;padding:105px 0 70px;width:100%;"><a class="icon" href="/"><img src="/icon.jpg">William Stafford Parsons</a></header><main style="min-height:280px;width:100%;"><h1>WSP-PRNG-32: The Fastest One-at-a-Time 32-Bit PRNG With Good Quality</h1><div class="section"><p class="no-margin-bottom"><a href="https://github.com/williamstaffordparsons/wsp-prng-32">WSP-PRNG-32</a> is a 32-bit pseudorandom number generator algorithm as a substantial improvement to JSF32, Lehmer, PCG32, Xoroshiro and Xorshift32.</p></div><div class="section"><h2>Library</h2><h3 class="no-margin-top">Source</h3><p><a href="https://raw.githubusercontent.com/williamstaffordparsons/wsp-prng-32/refs/heads/master/wsp_prng_32.c">wsp_prng_32.c</a><br><a href="https://raw.githubusercontent.com/williamstaffordparsons/wsp-prng-32/refs/heads/master/wsp_prng_32.h">wsp_prng_32.h</a></p><h3>Reference</h3><p><span class="code no-margin-left">wsp_prng_32_randomize()</span> is the randomization function that accepts the following argument.</p><p>1: <span class="code">s</span> is the <span class="code">struct wsp_prng_32_s</span> pointer with 3 <span class="code">uint32_t</span> integers <span class="code">s->a</span>, <span class="code">s->b</span> and <span class="code">s->increment</span>. Each must be initialized with any combination of values.</p><p>The return value data type is <span class="code">uint32_t</span>.</p><p>It returns the 32-bit unsigned integer pseudorandom number result.</p><h3>Example</h3><code>#include &lt;stdio.h&gt;
#include "wsp_prng_32.h"

int main(void) {
  struct wsp_prng_32_s s = {
    .a = 0,
    .b = 0,
    .increment = 0
  };
  unsigned char i = 0;

  while (i != 10) {
    i++;
    printf("Result %u is %u.\n", i, wsp_prng_32_randomize(&s));
  }

  return 0;
}</code><h3>Requirements</h3><p class="no-margin-bottom">It adheres to the C99 standard draft (ISO/IEC 9899:1999), although it's convertible to other programming languages and standards.</p></div><div class="no-margin-bottom section"><h2>Explanation</h2><p>WSP-PRNG-32 is designed to pass statistical tests with efficient resource usage, fast speed and a decent period relative to non-cryptographic, one-at-a-time PRNGs in high-performance applications.</p><p>It's portable for both 32-bit and 64-bit systems.</p><p>It meets strict compliance, portability and code security requirements.</p><p>It doesn't use modulus, multiplication or division arithmetic operations.</p><p>32-bit deterministic randomness is generated with a 96-bit auxiliary state.</p><p>By default, the period guarantees a smallest full cycle of 2³² numbers and an estimated average full cycle between 2⁶⁴ and 2⁹⁶ numbers.</p><p>32 bits of state in <span class="code">s->increment</span> are summed with <span class="code">1111111111</span> after each random number generation result and mixed in with the bit shuffling sequence to eliminate the probability of broken states with any combination of numbers.</p><p>The following test results are performed with all state bits initialized to <span class="code">0</span>.</p><p>It passes all TestU01 BigCrush battery tests as the fastest one-at-a-time PRNG that passes BigCrush.</p><p>It passes Diehard battery tests.</p><p>It passes <span class="code">stdin32</span> PractRand battery tests up until the default limit of 32 TB, which is far beyond the default practical limit of 5 TB. Anything beyond the aforementioned practical limit doesn't affect any application in which the evidence of statistical quality itself isn't a strict requirement.</p><p>The 32 TB PractRand test only failed 1 of about 100 tests when seeded with <span class="code">0</span>, suggesting the seed values caused an anomalic positive that could easily occur in a source of true randomness. Furthermore, <a href="/wsp-trng/">true-random number generators</a> often fail the aforementioned tests after only a few MB.</p><p>Compared to PCG32 using <span class="code">pcg32_fast</span>, the average speed is 18% faster.</p><p>Furthermore, PCG32 has a smaller full cycle with multiplication operations. Nevertheless, PCG32 may be a reasonable alternative in some applications where statistical randomness evidence is critical.</p><p>Compared to JSF32 and Lehmer, the average speed is 20% faster.</p><p>Compared to all Xoroshiro and Xorshift algorithms, it's 20% to 40% faster.</p><p>Furthermore, most of these PRNGs are vulnerable to several confirmed broken cycles when seeded with specific values, including <span class="code">0</span>.</p><p>When only 16-bit numbers are required, <a href="/wsp-prng-16/">WSP-PRNG-16</a> is the fastest 16-bit one-at-a-time PRNG with good quality.</p><p>When a larger period is required for 32-bit numbers, <a href="/wsp-vortex/">WSP-Vortex</a> is a high-quality, long-period PRNG with flexible state sizes and similar speed to Xorshift32.</p><p class="no-margin-bottom">All speed tests are performed locally by generating 1 billion numbers on a Pixelbook Go M3 using Debian.</p></div></main><footer><div class="no-margin-bottom"><p>&copy; 2024 William Stafford Parsons</p><ul><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li><li><a href="/#research">Research</a></li></ul><ul class="social-media"><li><a href="https://github.com/williamstaffordparsons"><img src="/icon-github.jpg"></a></li></ul><p style="color:#888;font-size:12px;line-height:19px;margin:52px 0 0;">All external mentions of William Stafford Parsons and associated intellectual property may contain either fraudulent claims or outdated content, especially when referencing subject matter not contained herein.</p></div></footer></div></body></html>
