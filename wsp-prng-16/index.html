<!DOCTYPE html><html lang="en"><head><title>WSP-PRNG-16: A Fast, Tiny 16-Bit PRNG</title><link href="https://williamstaffordparsons.github.io/wsp-prng-16/" rel="canonical"><link href="/favicon.ico" rel="icon" type="image/x-icon"><meta content="initial-scale=1,width=device-width" name="viewport"><meta charset="utf-8"><style type="text/css">a{color:#000;font-weight:bold;letter-spacing:-0.2px;text-decoration:none;}body,html{background:#fff;color:#000;font-family:sans-serif;font-size:14px;font-weight:normal;line-height:25px;margin:0;overflow-x:hidden;width:100%;}code{background:#eee;border-radius:4px;box-sizing:border-box;color:#111;display:inline-block;font-family:monospace;font-size:11px;font-weight:normal;height:auto;letter-spacing:-0.2px;line-height:19px;margin:8px 0 17px;overflow-x:scroll;padding:28px 31px 25px;white-space:pre;width:100%}footer{display:inline-block;margin:100px 0;width:100%;}footer ul{display:inline-block;}footer ul{margin:55px 0 0;padding:0;width:100%;}footer ul li{display:inline-block;float:left;line-height:18px;margin:0 15px 5px 0;}footer ul li a{font-size:12px;float:left;}footer .social-media a{display:block;float:left;}footer .social-media a img{height:16px;}h1,h2,h3{display:inline-block;font-weight:normal;text-transform:uppercase;width:100%;}h1{font-size:23px;letter-spacing:-0.9px;line-height:32px;margin:-6px 0 34px;word-spacing:1.4px;}h2{font-size:19px;letter-spacing:-0.6px;line-height:42px;margin:0 0 24px;padding-top:18px;}h3{font-size:14px;letter-spacing:-0.3px;margin:10px 0 20px;}p{box-sizing:border-box;color:#555;display:inline-block;margin:0 0 17px;width:100%;}p .code{background:#eee;border-radius:4px;color:#111;display:inline-block;font-family:monospace;font-size:11px;font-weight:normal;letter-spacing:-0.2px;line-height:17px;margin:2px 1px;padding:4px 6px 0;}.game{background:#000;border-radius:4px;box-sizing:border-box;margin:0 0 30px;padding:21px 32px;position:relative;}.game.no-margin-top{margin-top:5px !important;}.game a{height:100%;left:0;position:absolute;text-indent:-9999px;top:0;width:100%;}.game h3{color:#fff;font-weight:bold;line-height:30px;margin:3px 0 0;}.game img{display:block;height:32px;margin-top:12px;width:32px;}.game p{color:#999;margin-bottom:5px;}.icon{float:left;line-height:32px;}.icon img{float:left;height:32px;margin-right:15px;}.no-margin-bottom{margin-bottom:0 !important;}.no-margin-left{margin-left:0 !important;}.no-margin-top{margin-top:0 !important;}.section{margin-bottom:40px;position:relative;}</style></head><body><div style="box-sizing:border-box;margin:0 auto;max-width:720px;padding:0 25px;width:100%;"><header style="display:inline-block;padding:105px 0 70px;width:100%;"><a class="icon" href="/"><img src="/icon.jpg">William Stafford Parsons</a></header><main style="min-height:280px;width:100%;"><h1>WSP-PRNG-16: The Fastest 16-Bit PRNG With Good Quality</h1><div class="section"><p class="no-margin-bottom"><a href="https://github.com/williamstaffordparsons/wsp-prng-16">WSP-PRNG-16</a> is a 16-bit pseudorandom number generator algorithm as a substantial improvement to standard library <span class="code">rand()</span> functions, PCG16 and Xorshift16 "798".</p></div><div class="section"><h2>Library</h2><h3 class="no-margin-top">Source</h3><p><a href="https://raw.githubusercontent.com/williamstaffordparsons/wsp-prng-16/refs/heads/master/wsp_prng_16.c">wsp_prng_16.c</a><br><a href="https://raw.githubusercontent.com/williamstaffordparsons/wsp-prng-16/refs/heads/master/wsp_prng_16.h">wsp_prng_16.h</a></p><h3>Reference</h3><p><span class="code no-margin-left">wsp_prng_16_randomize()</span> is the randomization function that accepts the following argument.</p><p>1: <span class="code">s</span> is the <span class="code">struct wsp_prng_16_s</span> pointer with 2 32-bit unsigned integers <span class="code">s->increment</span> and <span class="code">s->increment_offset</span>. Each must be initialized with any combination of values.</p><p>The return value data type is <span class="code">uint16_t</span>.</p><p>It returns the 16-bit unsigned integer pseudorandom number result.</p><h3>Example</h3><code>#include &lt;stdio.h&gt;
#include "wsp_prng_16.h"

int main(void) {
  struct wsp_prng_16_s s = {
    .increment = 0,
    .increment_offset = 0
  };
  unsigned char i = 0;

  while (i != 10) {
    i++;
    printf("Result %u is %u.\n", i, wsp_prng_16_randomize(&s));
  }

  return 0;
}</code><h3>Requirements</h3><p class="no-margin-bottom">It adheres to the C99 standard draft (ISO/IEC 9899:1999), although it's convertible to other programming languages and standards.</p></div><div class="section"><h2>Explanation</h2><p>WSP-PRNG-16 is designed to use as an improvement to non-cryptographic, one-at-a-time PRNGs that generate a large amount of small numbers in high-performance applications.</p><p>It's portable for both 32-bit and 64-bit systems.</p><p>It meets strict compliance, portability and code security requirements.</p><p>It doesn't use modulus, multiplication or division arithmetic operations.</p><p>16-bit deterministic randomness is generated with a 64-bit state.</p><p>By default, the period guarantees a smallest full cycle of 2³² numbers.</p><p>32 bits of state in <span class="code">s->increment</span> are summed with <span class="code">1111111111</span> after each random number generation result and mixed in with the bit shuffling sequence to eliminate the probability of broken states with any combination of numbers.</p><p>It passes <span class="code">stdin16</span> PractRand tests up to 32 MB or 4 million randomized numbers.</p><p>Compared to <span class="code">rand()</span> in a local C99 implementation, it's 1000% faster with better statistical quality. <span class="code">rand()</span> passes PractRand tests up to 512 KB or 256,000 randomized numbers, which is 7% of the quality random numbers WSP-PRNG-16 generates.</p><p>Compared to PCG16, it's at least 150% faster. PCG16 passes PractRand tests up to 250 million randomized 16-bit numbers and may be a reasonable alternative in some applications where statistical randomness evidence is critical.</p><p>Compared to all Xoroshiro and Xorshift algorithms, including Xorshift16 "798", it's 45% to 65% faster. Xorshift16 "798" passes PractRand tests up to 64 KB or 32,000 randomized numbers, which is less than 1% of the quality random numbers WSP-PRNG-16 generates.</p><p>Furthermore, some of these PRNGs are vulnerable to several confirmed broken cycles when seeded with specific values, including <span class="code">0</span>.</p><p>Compared to the lower 16 bits of <a href="/wsp-prng-32/">WSP-PRNG-32</a>, it's 30% faster.</p><p class="no-margin-bottom">All speed tests are performed locally by generating 1 billion numbers on a Pixelbook Go M3 using Debian.</p></div><div class="no-margin-bottom section"><h2>Games</h2><div class="game no-margin-bottom no-margin-top"><a href="/contrivity/">Contrivity</a><h3>Contrivity</h3><p>Spawn into the hostile quantum laboratory and destroy oscillations.</p></div></div></main><footer><div class="no-margin-bottom"><p>&copy; 2024 William Stafford Parsons</p><ul><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li><li><a href="/#games">Games</a></li><li><a href="/#research">Research</a></li></ul><ul class="social-media"><li><a href="https://github.com/williamstaffordparsons"><img src="/icon-github.jpg"></a></li></ul><p style="color:#888;font-size:12px;line-height:19px;margin:52px 0 0;">All external mentions of William Stafford Parsons and associated intellectual property may contain either fraudulent claims or outdated content, especially when referencing subject matter not contained herein. All depictions of peril in games by William Stafford Parsons are for fictional gaming entertainment purposes only.</p></div></footer></div></body></html>
